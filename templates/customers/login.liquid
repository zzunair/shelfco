<section class="login section my-5">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mx-auto mb-0">
        <!-- login form -->
        <div class="col-xs-12 col-sm-12 col-md-12">
          <div class="row login__form" style="display: block;">
            <h2 class="heading-text">{{ 'customer.login.title' | t }}</h2>
            {% form 'customer_login' %}
            {% assign recover_success = form.posted_successfully? %}
            <!-- recovery alert -->
            {% if recover_success == true %}
            <h3 class="form__message" tabindex="-1" autofocus>
              {{ 'customer.recover_password.success' | t }}
            </h3>
            {% endif %}
            <!-- form errors -->
            {% if form.errors %}
            {{ form.errors | default_errors }}
            {% endif %}
            <div class="form-group row">
              <div class="col-sm-12">
                <label class="d-print-block sr-only" for="CustomerEmail">{{ 'customer.login.email' | t }}</label>
                <input
                  type="email"
                  placeholder="{{ 'customer.login.email' | t }}"
                  class="{% if form.errors contains 'email' %}input-error{% endif %}form-control"
                  name="customer[email]"
                  id="CustomerEmail"
                  spellcheck="false"
                  autocomplete="off"
                  {% if form.errors contains 'form' %}
                    aria-invalid="true"
                  {% endif %}
                  autocapitalize="off"
                  autofocus>
              </div>
            </div>
            {% if form.password_needed %}
            <div class="form-group row">
              <div class="col-sm-12">
                <label class="d-print-block sr-only" for="CustomerPassword">{{ 'customer.login.password' | t }}</label>
                <input
                  type="password"
                  placeholder="{{ 'customer.login.password' | t }}"
                  class="{% if form.errors contains 'password' %}input-error{% endif %}form-control"
                  name="customer[password]"
                  autocomplete="on"
                  {% if form.errors contains 'form' %}
                    aria-invalid="true"
                  {% endif %}
                  id="CustomerPassword">
              </div>
            </div>
            {% endif %}
            <!-- button toggles -->
            <div class="col-xs-12 col-sm-12 col-md-12 p-0 my-3">
              <div class="login-button-container d-flex clearfix">
                <div class="col-xs-6 sign-in">
                  <input type="submit" class="btn btn-contact rounded__all" value="{{ 'customer.login.sign_in' | t }}" aria-label="{{ 'customer.login.sign_in' | t }}">
                </div>
                {% if form.password_needed %}
                <div class="col-xs-6 register ml-3">
                  <button class="btn btn-contact register__button" aria-label="{{ 'customer.login.forgot_password' | t }}">
                    {{ 'customer.login.forgot_password' | t }}
                  </button>
                </div>
                {% endif %}
              </div>
            </div>
            <!-- end button toggles -->
            <a href="{{ routes.account_register_url }}" aria-label="{{ 'customer.login.title' | t }}">
              <u>{{ 'customer.register.title' | t }}</u>
            </a>
          {% endform %}
        </div>
      </div>
      <!-- end login form -->
      <!-- forgot password form -->
      <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="row register__form" style="display: none;">
          <div id="registration-form-wrapper" class="w-100">
            <h2 class="heading-text">{{ 'customer.recover_password.title' | t }}</h2>
            <p class="mb-0">{{ 'customer.recover_password.subtext' | t }}</p>
              {% form 'recover_customer_password' %}
              {% if form.errors %}
              {% for field in form.errors %}
              <div id="password-reset-error" class="alert alert-danger cart-info-bg mt-2 mb-0 text-left rounded-0 w-100 mx-auto" role="alert">
                {% if field == 'form' %}
                  {{ form.errors.messages[field] }}
                {% else %}
                  <span class="password-reset-error-confirmation mb-0 mt-2 cart-text-drawer text-dark">
                    {{ form.errors.translated_fields[field] | capitalize }}
                    {{ form.errors.messages[field] }}
                  </span>
                {% endif %}
              </div>
              {% endfor %}
              <script type="text/javascript">
              document.addEventListener("DOMContentLoaded", function() {
                const preventRedirect = function(e) {
                  document.querySelector('.login__form').classList.add('d-none');
                  document.querySelector('.login__form').classList.remove('d-block');
                  document.querySelector('.register__form').classList.add('d-block');
                  document.querySelector('.register__form').classList.add('d-none');
                }
                preventRedirect();
              });
              </script>
              {% endif %}
                <div class="form-group row pt-3">
                  <div class="col-sm-12">
                    <label class="d-print-block sr-only" for="recover-email">{{ 'customer.recover_password.email' | t }}</label>
                    <input
                      type="email"
                      class="form-control"
                      name="email"
                      placeholder="{{ 'customer.recover_password.email' | t }}"
                      id="recover-email"
                      spellcheck="false"
                      {% if form.errors %}
                        aria-invalid="true"
                        aria-describedby="RecoverEmail-email-error"
                        autofocus
                      {% endif %}
                      autocomplete="off"
                      autocapitalize="off"
                      autofocus>
                  </div>
                </div>
                {% if form.password_needed %}
                  <div class="form-group row">
                    <div class="col-sm-12">
                      <label class="d-print-block sr-only" for="CustomerPassword">{{ 'customer.login.password' | t }}</label>
                      <input
                        type="password"
                        placeholder="{{ 'customer.login.password' | t }}"
                        class="{% if form.errors contains 'password' %}input-error{% endif %}form-control"
                        name="customer[password]"
                        autocomplete="on"
                        id="CustomerPassword">
                    </div>
                  </div>
                {% endif %}
                <div class="login-button-container d-flex">
                  <div class="col-xs-6 sign-in">
                    <input id="resetBtn" type="submit" class="btn btn-contact" value="{{ 'customer.recover_password.submit' | t }}">
                  </div>
                  <div class="col-xs-6 cancel ml-3">
                    <a href="{{ routes.account_login_url }}" class="btn btn-contact">
                      {{ 'customer.recover_password.cancel' | t }}
                    </a>
                  </div>
                </div>
                {% endform %}
              </div>
            </div>
          </div>
        </div>
        <!-- end login form -->
      </div>
    </div>
  </div>
</section>

<script defer src="{{ 'customer.js' | asset_url }}"></script>
